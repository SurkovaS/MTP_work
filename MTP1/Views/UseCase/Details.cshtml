@using MTP1
@model MTP1.Models.UseCase
@{
    ViewBag.Title = string.Format("Сценарий тестирования | {0}", Constants.TITLE);
}

<p>
    @Html.ActionLink("Редактировать", "Edit", new { id = this.Model.ID }) |
    @Html.ActionLink("Сценарии тестирования", "Index")|
    @Html.ActionLink("Ввод первичных метрик", "Create", "UseCasePrimaryMetric") 
</p>

<fieldset>
    <legend>Сценарий тестирования</legend>
    <div class="display-label">Наименование сценария</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.Title)
    </div>
    <div class="display-label">
        Описание сценария</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.Description)
    </div>
    <div class="display-label">
        Проект</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.Project1.Title)
    </div>
    <div class="display-label">
        Программа тестирования</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.TestProgram1.Title)
    </div>
    <div class="display-label">
        Приоритет сценария</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.PriorityDic.Title)
    </div>
    <div class="display-label">
        UCP</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.Ucp)
    </div>
    <div class="display-label">
        Трудозатраты, чел-часы</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.ManHour)
    </div>
    <div class="display-label">
        Автор</div>
    <div class="display-field">
        @this.Html.DisplayFor(model => model.Users.Title)
    </div>
</fieldset>

<div id="grid_containerTF" style="width: 640px">
    <table id="gridTF" cellpadding="0" cellspacing="0">
    </table>
    <div id="pagerTF" style="text-align: center;">
    </div>
    <div id="searchTF" style="margin-left: 30%; display: none">
    </div>
</div>

<div id="grid_containerEF" style="width: 100%;margin-top: 15px">
    <table id="gridEF" cellpadding="0" cellspacing="0">
    </table>
    <div id="pagerEF" style="text-align: center;">
    </div>
    <div id="searchEF" style="margin-left: 30%; display: none">
    </div>
</div>

<div id="grid_containerAc" style="width: 100%;margin-top: 15px">
    <table id="gridAc" cellpadding="0" cellspacing="0">
    </table>
    <div id="pagerAc" style="text-align: center;">
    </div>
    <div id="searchAc" style="margin-left: 30%; display: none">
    </div>
</div>


<script type="text/javascript">
    var useCaseId = @Model.ID;

    $(function() {
        GridForTechFacts();
        //GridForEnvFacts();
        //GridForActors();
    });
    
    function GridForTechFacts() {
         
        var wcList = @Html.Raw(@Model.WFactorList);
        var indexUrlTF = '@Url.Action("GetTechFactsForUseCase", "TechnicalFactor")' + '?useCaseId=' + useCaseId;
        var editUrlTF = '@Url.Action("EditTechFactor", "UseCase")' + '?useCaseId=' + useCaseId;
        
        DrawEditableMTPGrid('gridTF', 'pagerTF', indexUrlTF, editUrlTF,
        ['Технический фактор', 'Весовой коэффициент', 'Сложность'],
                [
                    {
                        name: 'TechnicalFactor',
                        sortable: false,
                        editable: false,
                        align: 'left',
                        width: '100'
                    },
                    {
                        name: 'WeightCoefficient',
                        sortable: false,
                        align: 'center',
                        editable: true,
                        edittype: "select",
                        editoptions: { multiple: false, value: wcList }, 
                        editrules: { required: false }, 
                        formatoptions: { disabled: false},
                        width: '50'
                    },
                    {
                        name: 'Difficulty',
                        sortable: false,
                        align: 'center',
                        editable: true,
                        edittype: "select",
                        width: '50'
                    }
                ], 'Технические факторы сценария', true);
    }
    
    </script>
